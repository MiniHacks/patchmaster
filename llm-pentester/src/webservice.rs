use std::path::PathBuf;

use axum::{Form, response::Response};
use http::StatusCode;
use serde::{Serialize, Deserialize};


#[derive(Clone, Serialize, Deserialize, Debug)]
pub struct AuditRequest {
    github_url: String
}

pub async fn kick_off_pipeline(
    Form(req): Form<AuditRequest>,
) -> Result<Response, StatusCode> {
    // Step 1: Clone the git repo into somewhere

    // Step 2: Grep for all *.c files

    // Step 3: For each *.c file, read the contents and pass contents into the Auditor

    // Step 4: Take results of Auditor and open github issues

    todo!()
}

async fn clone_git_repo(
    github_url: String
) -> anyhow::Result<PathBuf> {
    todo!()
}